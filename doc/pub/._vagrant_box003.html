<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Doconce: http://code.google.com/p/doconce/" />

<link rel="stylesheet" href="https://raw.githubusercontent.com/hplgit/doconce/master/bundled/html_styles/style_vagrant/css/twitter_bootstrap.css">
<link rel="stylesheet" href="https://raw.githubusercontent.com/hplgit/doconce/master/bundled/html_styles/style_vagrant/css/vagrant.css">

<!-- Define color of headings here (last definition counts) -->
<style type="text/css">
h1, h2, h3, h4, h5, h6 {
  color: #000;     /* black */
  color: #999;     /* gray */
  color: #005580;  /* dark blue */
  color: #08c;     /* characteristic blue */
</style>
</head>
<body>

<title>Problem setting</title>

<div class="container">
 <div class="row Header with-border">
  <div class="span3 Module logo">
   <h1><a href="/">Vagrant<span class="subtitle">4scientists</span></a></h1>
  </div>
  <div class="span9">
   <div class="Module navigation">
   <!-- Navigation at the top of the page -->
    <ul>
     <li> <a href="http://docs.vagrantup.com/v2/">Vagrant docs</a></li>
    </ul>
   </div>
  </div>
 </div>
</div>


<!-- Here goes the table of contents in the sidebar -->
<div class="row">
 <div class="span3 Module sidebar">
  <div class="well" style="padding: 8px 0px;">
   <ul class="nav nav-list">
          <!-- navigation toc: --> <li><a href="._vagrant_box001.html#___sec0" style="font-size: 80%;">Problem setting</a></li>
     <!-- navigation toc: --> <li><a href="#___sec6" style="font-size: 80%;">Creating the Vagrant machine</a></li>
     <!-- navigation toc: --> <li><a href="._vagrant_box008.html#___sec18" style="font-size: 80%;">Operating the Vagrant machine</a></li>
     <!-- navigation toc: --> <li><a href="._vagrant_box009.html#___sec31" style="font-size: 80%;">Appendix: Condensed instructions for students</a></li>

    </ul>
   </div>
  </div>

  <div class="span9">


<!-- tocinfo
{'highest level': 1,
 'sections': [(' Problem setting ', 1, None, '___sec0'),
              (' Contents of the Vagrant machine ',
               2,
               'vagrant:contents',
               'vagrant:contents'),
              (' Installing the necessary software for using Vagrant ',
               2,
               'vagrant:install',
               'vagrant:install'),
              (' VirtualBox ', 3, None, '___sec3'),
              (' Vagrant ', 3, None, '___sec4'),
              (' Cygwin (only on Windows) ', 3, None, '___sec5'),
              (' Creating the Vagrant machine ', 1, None, '___sec6'),
              (' Choice of operating system type ', 2, None, '___sec7'),
              (' Downloading a base box to create a complete Vagrant machine ',
               2,
               None,
               '___sec8'),
              (' Making an empty Vagrant machine ', 2, None, '___sec9'),
              (' Installing packages in a complete Vagrant machine ',
               2,
               'vagrant:complete:install',
               'vagrant:complete:install'),
              (' Creating files ', 3, None, '___sec11'),
              (' Installing files and packages ', 3, None, '___sec12'),
              (' Enabling X11 graphics ', 3, None, '___sec13'),
              (' Packaging a new box ', 3, None, '___sec14'),
              (' Installing packages in an empty Vagrant machine ',
               2,
               'vagrant:empty:install',
               'vagrant:empty:install'),
              (' Scripts for installing ready-made packages ',
               2,
               'vagrant:debpkg',
               'vagrant:debpkg'),
              (' Setting up a default environment with `.bashrc` ',
               2,
               'vagrant:bashrc',
               'vagrant:bashrc'),
              (' Operating the Vagrant machine ', 1, None, '___sec18'),
              (' Operating a complete Vagrant machine ', 2, None, '___sec19'),
              (' Operating an empty Vagrant machine ', 2, None, '___sec20'),
              (' Working with an initialized Vagrant machine ',
               2,
               None,
               '___sec21'),
              (' Shared directories ',
               2,
               'vagrant:shareddir',
               'vagrant:shareddir'),
              (' Troubleshooting ', 2, 'vagrant:trouble', 'vagrant:trouble'),
              (' Troubleshooting: shared directory is invisible ',
               3,
               None,
               '___sec24'),
              (' Troubleshooting: "couldn\'t connect to display ..." ',
               3,
               None,
               '___sec25'),
              (' Troubleshooting: Internet is not reachable ',
               3,
               None,
               '___sec26'),
              (' Stopping the Vagrant machine ', 2, None, '___sec27'),
              (' Placing the Vagrant machine in the cloud ',
               2,
               None,
               '___sec28'),
              (' Using VMWare Fusion ', 2, None, '___sec29'),
              (' Documentation of Vagrant ', 2, None, '___sec30'),
              (' Appendix: Condensed instructions for students ',
               1,
               None,
               '___sec31'),
              (' Troubleshooting: shared directory is invisible ',
               2,
               None,
               '___sec32'),
              (' Troubleshooting: "couldn\'t connect to display ..." ',
               2,
               None,
               '___sec33'),
              (' Troubleshooting: Internet is not reachable ',
               2,
               None,
               '___sec34')]}
end of tocinfo -->





<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: {
     equationNumbers: {  autoNumber: "none"  },
     extensions: ["AMSmath.js", "AMSsymbols.js", "autobold.js", "color.js"]
  }
});
</script>
<script type="text/javascript"
 src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<a name="part0003"></a>
<!-- !split -->

<h1 id="___sec6">Creating the Vagrant machine <a name="___sec6"></a></h1>

<p>
In this section we explain how to select an operating system for
the Vagrant machine, how to install pre-compiled binary packages,
how to install (Python) packages from source code, and how to configure
the machine.

<h2 id="___sec7">Choice of operating system type <a name="___sec7"></a></h2>

<p>
The first step of building a Vagrant machine is to choose a plain
version of an operating system to base the machine on. This is called
a <em>base box</em>. A lot of pre-made base boxes for various versions of
operating systems are available at <a href="http://www.vagrantbox.es" target="_self"><tt>http://www.vagrantbox.es</tt></a>.
(If, for some reason, you want to build a base box with another
operating system, there are <a href="http://docs-v1.vagrantup.com/v1/docs/base_boxes.html" target="_self">instructions</a> for that.)  Let
us decide on adopting <em>Ubuntu precise 64</em>, which we find down on the
list.  This is a version of Ubuntu 12.04
(<code>precise</code> refers to the official Ubuntu name Precise Pangolin for
version 12.04).  Click on <em>Copy</em> to copy the URL.
You have now two choices:

<ol>
<li> you can build and distribute a complete
   virtual machine, or</li>
<li> the user can download a box and then automatically install
   a list of prescribed packages in the box.</li>
</ol>

The former approach, called a <em>complete Vagrant machine</em> in the following,
results in one big file containing the machine. The latter approach,
referred to as a <em>Vagrant machine specification</em> results in very
small text files to be distributed to the users.

<p>
The advantage of a complete Vagrant machine is that users can download
one big file and they immediately have an operative machine. You are also
guaranteed that all users have identical environments. An empty
Vagrant machine is easy to distribute, but the disadvantage is that
a user's initialization of the machine takes (very) long time since
a lot of packages must be downloaded and installed. Something can go
wrong with the installation. It may also happen that different users
get slightly different environments because they run the installation
process of their machines at different times.

<h2 id="___sec8">Downloading a base box to create a complete Vagrant machine <a name="___sec8"></a></h2>

<p>
Paste the copied URL of the chosen box in
a new browser tab. This action should automatically
download a file <code>precise64.box</code>.
Say you store this file in a directory <code>~/vagrant</code>. Go to this
directory and run

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; vagrant box add mybox precise64.box
Terminal&gt; vagrant init mybox
Terminal&gt; vagrant up
</pre></div>
<p>
The result is now an initialized Vagrant machine <code>mybox</code> which you
can log into. The
<code>vagrant</code> directory where these commands are run is
known as the <em>project directory</em> in the <a href="http://docs.vagrantup.com/v2/" target="_self">Vagrant documentation</a>.

<h2 id="___sec9">Making an empty Vagrant machine <a name="___sec9"></a></h2>

<p>
Make some directory (say) <code>~/vagrant</code>, move to this directory, and
type

<p>

<!-- code=text (!bc sys) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%">Terminal&gt; vagrant init
</pre></div>
<p>
This command creates a <code>Vagrantfile</code>. Invoke the file in a text editor
and replace the line <code>config.vm.box = &quot;base&quot;</code> by the URL to the
base box and add another line <code>config.ssh.forward_x11 = true</code> to
enable X11 graphics. The <code>Vagrantfile</code> looks something like

<p>

<!-- code=ruby (!bc rbcod) typeset with pygments style "default" -->
<div class="highlight" style="background: #f8f8f8"><pre style="line-height: 125%"><span style="color: #880000">Vagrant</span><span style="color: #666666">.</span>configure(<span style="color: #BA2121">&quot;2&quot;</span>) <span style="color: #008000; font-weight: bold">do</span> <span style="color: #666666">|</span>config<span style="color: #666666">|</span>
  <span style="color: #408080; font-style: italic"># All Vagrant configuration is done here. The most common configuration</span>
  <span style="color: #408080; font-style: italic"># options are documented and commented below. For a complete reference,</span>
  <span style="color: #408080; font-style: italic"># please see the online documentation at vagrantup.com.</span>

  <span style="color: #408080; font-style: italic"># Every Vagrant virtual environment requires a box to build off of.</span>
  config<span style="color: #666666">.</span>vm<span style="color: #666666">.</span>box <span style="color: #666666">=</span> <span style="color: #19177C">http</span>:<span style="color: #BB6688">//</span>files<span style="color: #666666">.</span>vagrantup<span style="color: #666666">.</span>com<span style="color: #666666">/</span>precise64<span style="color: #666666">.</span>box
  config<span style="color: #666666">.</span>ssh<span style="color: #666666">.</span>forward_x11 <span style="color: #666666">=</span> <span style="color: #008000">true</span>
  <span style="color: #666666">.</span>.<span style="color: #666666">.</span>
<span style="color: #008000; font-weight: bold">end</span>
</pre></div>
<p>
<p>
<!-- navigation buttons at the bottom of the page -->
<ul class="pager">
  <li class="previous">
    <a href="._vagrant_box002.html">&larr; Prev</a>
  </li>
  <li class="next">
    <a href="._vagrant_box004.html">Next &rarr;</a>
  </li>
</ul>
<!-- ------------------- end of main content --------------- -->


 </div>

 <div class="row Footer">
  <div class="span12">
  Copyright &copy 2013; Anders E. Johansen and Hans Petter Langtangen
  </div>
 </div>
</div>
</body>
</html>

